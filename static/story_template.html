<div id="breadcrumb-bar">
  <a class="breadcrumb index">Index</a>
  <a class="breadcrumb sprint">{{sprint.title}}</a>
  <a class="breadcrumb story selected">{{story.title}}</a>
</div>
<div id="content">
	<form>
		<p>
			<input on-keyup="trigger_update:true" on-focusout="trigger_update" id="title" class="identifier" value="{{story.title}}"/>
		</p>
		<p>
			<textarea on-keyup="trigger_update:true" on-focusout="trigger_update" id="description" value="{{story.description}}"/>
		</p>
		<p class="attribute">
			<span class="label">{{constants.en_US.COLOR}}:&nbsp;</span>
			<span id="color-selector" class="popup-selector">
				<a href="#" class="open">
					<div on-tap="tapped_selector:color-selector" class="selected {{story.color}}"/>
					<div class="content">
					{{#COLORS:i}}
						<div on-tap='tapped_selector_item:{"selector_id":"color-selector","value":"{{.}}"}' class="color {{.}} box-{{i}}"/>
					{{/COLORS}}
					</div>
				</a>
			</span>
		</p>
		<p class="attribute">
			<span class="label">{{constants.en_US.SPRINT}}:&nbsp;</span>
			<span id="sprint-selector" class="popup-selector line-selector">
				<a href="#" class="open">
					<span on-tap="tapped_selector:sprint-selector" class="selected">{{sprint.title}}</span>
					<div class="content">
					{{#sprints}}
						<div on-tap='tapped_selector_item:{"selector_id":"sprint-selector","value":"{{_id}}"}' class="line">{{title}}</div>
					{{/sprints}}
					</div>
				</a>
			</span>
		</p>
		<p class="attribute">
			<span class="label">{{constants.en_US.ESTIMATION}}:&nbsp;</span>
			<input id="estimation" on-keyup="trigger_update:true" on-focusout="trigger_update" value="{{story.estimation}}"/>
			<span class="error-popup">
				<div class="content error">{{constants.en_US.VALID_TIME_MESSAGE}}</div>
			</span>
		</p>
		<ul id="well">
			{{#children:i}}
				<li class="panel">
					<div class="header {{color}}">
						<input class="{{color}}" on-keyup="trigger_update:true" on-focusout="trigger_update" id="summary-{{i}}" value="{{summary}}"/>
						<div class="stats">
							<img src="/{{buildRemainingTime(remaining_time, sprint) > 0 ? 'clock_white_30.png' : 'done_white_30.png'}}">
							<div class="text">{{buildRemainingTime(remaining_time, sprint) > 0 ? buildRemainingTime(remaining_time, sprint) : ''}}</div>
						</div>
					</div>
					<textarea on-keyup="trigger_update:true" on-focusout="trigger_update" id="description-{{i}}" class="body" value="{{description}}"/>
					<div class="button-bar">
						<div class="buttons">
							<input on-tap="tapped_button:task_open" class="button open" type="button" value="{{constants.en_US.OPEN}}">
							<input on-tap="tapped_button:task_remove" class="button remove" type="button" value="{{constants.en_US.REMOVE}}">
						</div>
					</div>
				</li>
			{{/children}}
		</ul>
	</form>
</div>
<div id="button-bar">
	<form class="buttons">
		<input on-tap="tapped_button:task_add" class="button add" type="button" value="{{constants.en_US.ADD_TASK}}">
		<input on-tap="tapped_button:story_remove" class="button remove" type="button" value="{{constants.en_US.REMOVE}}">
	</form>
</div>
<div id="error-popup">
	<div class="message error">{{error_message}}</div>
	<div class="popup-buttons">
		<form class="buttons">
			<input on-tap="tapped_button:error_ok" class="button" type="button" value="{{constants.en_US.OK}}">
		</form>
	</div>
</div>
<div id="confirm-popup">
	<div class="message warning">{{confirm_message}}</div>
	<div class="popup-buttons">
		<form class="buttons">
			<input on-tap="tapped_button:confirm_cancel" class="button" type="button" value="{{constants.en_US.CANCEL}}">
			<input on-tap="tapped_button:confirm_confirm" class="button" type="button" value="{{constants.en_US.CONFIRM}}">
		</form>
	</div>
</div> 